PREPASS â€” INVENTORY & COMPLETENESS AUDIT

SOURCE FOLDER
- Treat this as the working directory for all filters:  
  `C:\Users\Kubik\Downloads\filter\All filters\`

BASE FILTER
- Use this file as the already-merged base weâ€™re expanding:  
  `"C:\Users\Kubik\Downloads\filter\All filters\filter for editing my current filter modified\MergedUltimatePD2Filter.filter"`

====================================================================
GLOBAL SCOPE: PROJECT DIABLO 2 â€“ INCLUDE EVERYTHING
====================================================================

SCOPE OF WORK

This project is NOT a small merge. You are building the most complete,
all-in-one Project Diablo 2 knowledge/filter file possible.

You MUST use EVERY relevant source file related to Project Diablo 2 in
this repository, including but not limited to:

- All *.filter files in any subfolder (Hiim, Kassahi, eqN, Feather,
  TalRasha, Dauracul, Kryszard, pd2filter, pd2lootfilter, DHFilter, etc.)
- All PD2 documentation HTML files (Item Filtering, Crafting, etc.)
- Any PD2-related *.txt data files or notes inside "All filters" and
  its subdirectories.

If a file is about Project Diablo 2, you MUST assume it is relevant
and process it completely.

====================================================================
GLOBAL CHUNKED-READING RULE â€“ APPLIES TO EVERY PD2 FILE
====================================================================

Because the tools (Read, Grep, etc.) have strict size limits, you MUST
NEVER rely on a single Read of a large file. A single Read will ALWAYS
miss content.

For EVERY PD2-related file discovered in the PREPASS inventory:

1) Determine total line count  
   Bash:
   wc -l "<path-to-file>"

2) Read the ENTIRE file in fixed-size chunks (e.g. 500 lines at a time)
   until the final line is processed. Example:

   Bash
   sed -n '1,500p' "<path>"
   sed -n '501,1000p' "<path>"
   sed -n '1001,1500p' "<path>"
   ...continue increasing ranges until you reach the end.

   (Alternative: tail -n +<start> "<path>" | head -n 500)

3) For EACH chunk of EVERY file, extract ALL useful PD2 information:
   - Aliases
   - ItemDisplay rules
   - Crafting tags and recipes
   - Economy tags ({Sell}/{Trade}/{Keep}/{Craft}/{Salvage})
   - Class-specific logic and staffmods
   - Runeword and socket logic (including Larzuk outcomes)
   - Map/uber/quest/LLD rules
   - Any comments, hints, or flavor text that add information

4) Only after EVERY chunk has been processed may you treat that file as
   â€œfully read.â€ Partial reads are NOT allowed.

5) If using a Read tool with offset/limit, apply the same protocol:
   loop through the whole file with increasing offsets until the end.

====================================================================
PREPASS REQUIREMENT â€“ APPLY TO ALL FILES
====================================================================

During the PREPASS inventory step:

- Discover EVERY PD2-related file under:
    C:\Users\Kubik\Downloads\filter\All filters\

- For EACH discovered file:
    â†’ Apply the GLOBAL CHUNKED-READING RULE above.
    â†’ Do NOT skip, ignore, or partially read any file.

The gap map, merge plan, and final Merged_Ultimate.filter MUST be based
on 100% of the content from 100% of the PD2 files in this directory.
Nothing may be left unscanned.

TASKS
1) INVENTORY: List every `.filter` file found under the folder (including subfolders of known repos) and group by project (Hiim, Kassahi, eqN, Feather, TalRasha, PD2, DHFilter, Kryszard, etc.). For each, list notable sections (maps, runes, runewords, LLD, shopping/gambling, socket rules, jewels/charms, staffmods, crafting, quest/uber mats).
2) GAP MAP: For each group, mark which features are **missing** from the base `hiim.filter`.
3) PLAN: Output a concise merge plan (checklist) with section order. This plan will drive Part 1â€“4.
// ADDED:
4) CRAFTING RECOMMENDATIONS: When scanning each filter, also note any rules, comments, or tags that indicate items are â€œrecommended to craftâ€ or â€œnot recommended to craftâ€ so they can be merged into the base later.

OUTPUT
- Emit only the audit + plan (â‰¤200 lines). Then stop and print `[[READY_FOR_PART_1]]`.


ðŸ§± BASE SETUP
- Use this file as the **base filter**:  
  `C:\Users\Kubik\Downloads\filter\All filters\filter for editing my current filter modified\MergedUltimatePD2Filter.filter`
- All additional filters to pull data and rules are in folders to which dev created the filter and can also be found usually at the top of the .filter file and are stored in:  
  `C:\Users\Kubik\Downloads\filter\All filters\`

ðŸŽ¯ OBJECTIVE
Merge all filters in that folder into the base hiim.filter by:
- Comparing each file and identifying anything **unique or missing** from hiim.filter.
- Adding all those unique sections, item rules, alias definitions, crafting recommendations, and comments into the base.
- **Do NOT delete or modify** existing hiim.filter content â€” only add or enhance.

// ADDED:
Also incorporate external crafting information from the Project Diablo 2 crafting guide:
- Use the uploaded file `Crafting - Project Diablo 2.html` (PD2 wiki page) as a reference for crafting recipes, item bases, and whether they are recommended or not recommended to craft.
- Treat that page as an authoritative source for which bases and crafts should be labeled as {Recommended Craft} or {Not Recommended Craft} in the filter.

ðŸ§© OUTPUT REQUIREMENTS
- Maintain clear section headers.
- Preserve PD2 formatting and encoding (no invalid characters).
- Output the merged result as `Merged_Ultimate.filter`, using Markdown code blocks of â‰¤100k tokens.
- At the end of each chunk, add a marker like `[[CONTINUE:n]]` for the next part.
- Begin by printing a **short Table of Contents** of major sections to be included.
Then start emitting `Merged_Ultimate.filter (Part 1)` code immediately.

VISUAL & CLASS ENHANCEMENT LAYER

ðŸŸ¡ UNHIDE GOLD
- Make all gold visible in every context (maps, towns, dungeons, etc.).
- Use a bright, readable â€œgolden yellowâ€ color for text and a clear pickup sound.

ðŸŽ¨ CLASS THEMES
- Assign unique color schemes to each class for class-specific gear, crafts, and drops:
  â€¢ Paladin â€“ Holy Light (gold-white)  
  â€¢ Barbarian â€“ Deep Red + Steel Gray  
  â€¢ Sorceress â€“ Arcane Blue  
  â€¢ Amazon â€“ Emerald Green  
  â€¢ Assassin â€“ Shadow Violet  
  â€¢ Necromancer â€“ Bone White / Ivory  
  â€¢ Druid â€“ Forest Green  
- Apply these consistently to class item bases, skill/staffmod items, and crafting bases.

âš’ï¸ CRAFTING BASES
- Add top-tier crafting bases per class (armor, weapons, shields, jewels, charms).
- Show sockets, item level (if possible), runeword eligibility, and quality tier.
- If not already in hiim.filter, import or define missing base categories.

ðŸ“¦ OUTPUT
Continue the code output of `Merged_Ultimate.filter` where you left off.
End each code block with `[[CONTINUE:n]]`.

ECONOMY & CRAFTING INTELLIGENCE LAYER

ðŸ’° PROFIT SYSTEM
- Tag drops by function:
  `{Sell}` = high vendor value  
  `{Trade}` = strong market value  
  `{Keep}` = good for self-use  
  `{Craft}` = crafting base or recipe target  
  `{Salvage}` = cube material  
- Add visible hints next to item names or in comments.

// ADDED â€“ CRAFTING RECOMMENDATIONS FROM FILTERS + WIKI
- Search all `.filter` files in `C:\Users\Kubik\Downloads\filter\All filters\` for any logic, tags, or comments that indicate:
  â€¢ â€œrecommended to craftâ€  
  â€¢ â€œnot recommended to craftâ€  
  â€¢ or similar wording for crafting priorities.
- Merge these recommendations into `Merged_Ultimate.filter` by:
  â€¢ Adding `{Recommended Craft}` or `{Not Recommended Craft}` style tags near affected items/bases.  
  â€¢ Keeping the original filterâ€™s intent (if a filter says something is bad to craft, preserve that meaning).  
- Combine that with the recommendations from `Crafting - Project Diablo 2.html`, so the final filter:
  â€¢ Promotes bases and recipes the wiki marks as strong or recommended.  
  â€¢ Still shows, but visually downplays, those that are not recommended.

ðŸ§± CRAFTING PRIORITY COLORS
- Tier 1 (best) bases = vibrant highlight  
- Tier 2 = moderate emphasis  
- Tier 3 = minimal glow but still visible
- Include notes for common PD2 crafting recipes and rune upgrades.

ðŸŽ² SHOPPING & GAMBLING
- Add reminders for vendor bases (circlets, claws, wands, scepters).
- Highlight amulets, rings, and circlets that roll well via gambling.

ðŸ“œ GAMEPLAY TIPS
- Add short inline notes like â€œCube with Perfect Gemâ€, â€œUse for Runewordâ€, or â€œUpgradeâ€.
- Prioritize high-value loot visibility while keeping readability balanced.

ðŸ“¦ OUTPUT
Continue output of `Merged_Ultimate.filter`, using â‰¤100k-token chunks.
End each with `[[CONTINUE:n]]`.

FINAL PASS â€” QUALITY & PERFORMANCE OPTIMIZATION

ðŸ§¹ CLEANUP
- Remove duplicates or conflicting rules created during merging.
- Keep hiim.filterâ€™s original order and priority when overlap occurs.

âš™ï¸ VALIDATION
Confirm that:
âœ… Gold is visible everywhere.  
âœ… Class color themes are applied.  
âœ… Crafting bases are clearly marked.  
âœ… `{Sell}/{Keep}/{Trade}/{Craft}/{Salvage}` tags appear where appropriate.  
âœ… No valuable items or drop types are hidden.
// ADDED:
âœ… Crafting recommendations from all filters and from `Crafting - Project Diablo 2.html` are present and correctly labeled as recommended or not recommended to craft.

ðŸ” PERFORMANCE
- Avoid redundant lines and minimize lag by merging similar rules logically.
- Ensure clear spacing and comments for human readability.

ðŸ“‹ SUMMARY
At the end, print a short â€œSummary & Checklistâ€ describing:
- Which filters contributed content
- What categories were added
- What visual and functional upgrades were applied
- Which crafting recommendations came from which source (filters and the crafting HTML guide, if possible).

ðŸ“¦ OUTPUT
Emit the remaining code sections of `Merged_Ultimate.filter` until complete, marking the final block as `[[DONE]]`.

COMPLETENESS CHECKLIST â€” DO NOT SKIP
Verify all categories are present and visible:

A) GLOBAL
- Gold always visible (all contexts); stack counts show; pickup sound set
- Runes: display, tooltips, upgrade/cube notes, socket bonuses
- Gems/Jewels/Charms: value cues, rolls, crafting notes
- Sockets: counts on bases, RW eligibility tags

B) CLASSES (Paladin + all others)
- Class color themes applied (Paladin = Holy Light)
- Staffmods/skill trees recognized on class bases
- **Top crafting bases per class** present and tiered (T1/T2/T3) with `{Craft}` or `{RW}` tags

C) ECONOMY
- `{Sell}/{Keep}/{Trade}/{Craft}/{Salvage}` tags appear where relevant
- Superior ED/DEF rolls and profitable vendor targets noted
- Gambling/vendor callouts (rings/amus/circlets; claws/wands/scepters with staffmods)

// ADDED â€“ CRAFTING RECOMMENDATION COVERAGE
- Check that every recipe/base marked as recommended or not recommended to craft in:
  â€¢ Any `.filter` file in the source folder, and  
  â€¢ `Crafting - Project Diablo 2.html`  
  is represented in the filter with an appropriate tag or visual treatment.

D) MAPS & BOSSES
- Map immunities/notes; uber mats; keys; cube mats
- Town display of stackable quantities

E) LEGACY/EDGE
- LLD sections; mystery/meme/hyper variants if present
- Shopping sections; weapon range; naming/formatting modules

If ANY item above is missing, append the required rules at the end in a `// MISSING -> ADDED` section and cross-link in the Table of Contents.

FINAL
- Print a short table mapping: {source filter} â†’ {sections imported}. End with `[[DONE]]`.
- Where possible, include which sources contributed crafting recommendations (filters and crafting HTML page).
